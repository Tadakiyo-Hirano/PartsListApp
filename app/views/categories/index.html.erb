<div class="row">
  <div class="col-md-6 offset-md-3">
    <h3>カテゴリー登録･編集<%= @check %></h3>
    <div class="new-category-btn">
      <div class="new-category-item-left" data-toggle="modal" data-target="#new-category-modal">
        <%= new_category_btn %>
      </div>
      <div class="new-category-item-left">
        <%= delete_category_btn %>
      </div>
      <div class="new-category-item-right">
        <%= link_to '並べ替え', index_sort_categories_path, class: "btn btn-sm btn-navy", data: {"turbolinks" => false} %>
      </div>
    </div>

    <table class="table table-sm table-sortable">
      <thead>
        <tr w-auto class="bg-light">
          <th></th>
          <th>No.</th>
          <th><%= Category.human_attribute_name :name %></th>
          <th></th>
        </tr>
      </thead>

      <tbody>
        <% unless params[:id] %>
          <%= form_tag({ controller: :categories, action: :destroy_all }, id: "delete-category", method: 'delete') do %>
            <% @categories.each do |category| %>
              <tr>
                <td><%= check_box_tag 'categories[]',category.id %></td>
                  <td class="table-number"><%= @heading_number += 1 %>&emsp;</td>
                  <td><%= category.name %></td>
                <td>
                  <%= link_to categories_path(id: category), local: true, method: :get do %>
                    <i class="far fa-edit"></i>
                  <% end %>
                </td>
              </tr>
            <% end %>
          <% end %>
        <% else %>
          <% @categories.each do |category| %>
            <tr>
              <td><%= check_box_tag '', 'true', false, disabled: true %></td>
                <td class="table-number"><%= @heading_number += 1 %>&emsp;</td>
                <td><%= edit_category_form(category) %></td>
              <td>
                <% if @category.id == category.id %>
                  <%= link_to categories_path do %>
                    <i class="far fa-window-close"></i>
                  <% end %>
                <% else %>
                  <%= link_to categories_path(id: category), local: true, method: :get do %>
                    <i class="far fa-edit"></i>
                  <% end %>
                <% end %>
              </td>
            </tr>
          <% end %>
        <% end %>
      </tbody>
    </table>
  </div>
</div>

<%= render 'new' %>
